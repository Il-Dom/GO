<html>
<head>
    <!-- external libraries -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    
    <!-- bootstrap for dynamic and responsive html pages -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    <!-- stylesheet -->
	<link rel="stylesheet" type="text/css" href="style/styleBoard.css">

    <!-- JavaScript code -->
	<script type="text/javascript">
	var res = "images/"
	function retrieveImage( cell, x, y, img, dimen ){
		var corner = "url(\""+res + img +"-corner.png\")";
		var edge = "url(\""+res + img +"-edge.png\")";

		if( x==1 && y==1 ){
			cell.style.backgroundImage = corner;
		}
		else if ( x==dimen && y==1 ){
            $(cell).css("transform", "rotate(270deg)");
			cell.style.backgroundImage = corner;
		}
		else if ( x==dimen && y==dimen ){
            $(cell).css("transform", "rotate(180deg)");
			cell.style.backgroundImage = corner;
		}
		else if ( x==1 && y==dimen ){
            $(cell).css("transform", "rotate(90deg)");
			cell.style.backgroundImage = corner;
		}
		else if( x == 1 ){
			cell.style.backgroundImage = edge;
		} 
		else if( y == 1 ){
            $(cell).css("transform", "rotate(270deg)");
			cell.style.backgroundImage = edge;
		}
		else if( y == dimen ){
            $(cell).css("transform", "rotate(90deg)");
			cell.style.backgroundImage = edge;
		}
		else if( x == dimen ) {
            $(cell).css("transform", "rotate(180deg)");
			cell.style.backgroundImage = edge;
		}
	}
    
        
    var gameBoard;
    var bTurn = true;
        
    function clickListener(obj){
        
        var middle = Math.ceil(obj.id.length / 2);
        var x = parseInt(obj.id.slice(0,middle))-1;
        var y = parseInt(obj.id.slice(middle))-1;
        
        if ( !gameBoard [x][y]  ){
            if(bTurn){
                gameBoard[x][y] = 1;
                $(obj).find('div:first').css('background-image','url(images/perla_nera.svg)');
                $(obj).find('div:first').css('visibility','visible');
                $(obj).unbind('mouseenter mouseleave');
            }
            else{
                gameBoard[x][y] = 2;
                $(obj).find('div:first').css('background-image','url(images/perla_bbianca.svg)');
                $(obj).find('div:first').css('visibility','visible');
                $(obj).unbind('mouseenter mouseleave');
            }
            bTurn = !bTurn;
        }
        //console.log(x + " - " + y);
    }    
    

        
	function createBoard(dimen){
		var boardW = $('#board').width();
		var boardH = $('#board').height();
		var size = boardW/dimen;
		gameBoard = new Array(dimen).fill(dimen).map(() => new Array(dimen).fill(0));
        //console.log(gameBoard);
        
		for(var r = 1; r <= dimen; r++){
			var row = document.createElement("div"); 
			row.className = "row";
			row.id = "row"+digify(r);
			row.style.height = size;

			for(var c = 1; c <= dimen; c++){ 
				/*creating a cell with the relative style*/
                var cell = document.createElement("div"); 
				cell.id = ""+digify(r)+digify(c);
				cell.className = "boardCell";
				cell.style.backgroundImage = "url(\""+res +"wood1-center.png\")";
				cell.style.width = size;
				cell.style.height = size;
				retrieveImage(cell, r, c, "wood1", dimen);				
                
                /*creating pawn and appending to the cell*/
				var pawn = document.createElement('div');
				pawn.className = 'pawn';
				pawn.style.width = size;
				pawn.style.height = size;
                
				cell.appendChild(pawn);

                /*handler functions*/
				$(cell).hover(function(){
                    if(bTurn){
                        $(this).find('div:first').css('background-image','url(images/perla_nera.svg)');
                    }
                    else{
                        $(this).find('div:first').css('background-image','url(images/perla_bbianca.svg)');
                    }
                    
					$(this).find('div:first').css('visibility','visible');
				},function(){
					$(this).find('div:first').css('visibility','hidden');
				});

                $(cell).on('click',function(){
                   clickListener(this); 
                });
                
				row.appendChild(cell); 
			} 
			board.appendChild(row);
		}
	}
    
     function digify(n){
        return n > 9 ? "" + n: "0" + n;
    }

        
	$(document).ready(function(){
		createBoard(19);
	});
	</script>

	<title>
	what is the rudest type of elf? a GOfuckyourself
	</title>
	<meta content="">
</head>
<body>
    <div id = 'board'> </div>
</body>
</html>